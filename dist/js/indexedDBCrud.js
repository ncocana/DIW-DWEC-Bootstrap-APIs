const INPUT_POKEMON_NAME="inputPokemonName",INPUT_SUBSCRIBER_EMAIL="subscriberEmail",db_openRequest=indexedDB.open(DB_NAME,1);async function getAllPokemon(){return new Promise((o,t)=>{var e=db_openRequest.result.transaction(DB_TABLE_POKEMONS,"readonly").objectStore(DB_TABLE_POKEMONS).openCursor();const n=[];e.onsuccess=function(e){e=e.target.result;e?(n.push(e.value),e.continue()):o(n)},e.onerror=function(e){t(new Error("Failed to get all Pokemon data."))}})}async function getOnePokemon(n=""){return new Promise((o,t)=>{var e=db_openRequest.result.transaction(DB_TABLE_POKEMONS,"readonly").objectStore(DB_TABLE_POKEMONS).index("Name"),e=(n=n||document.getElementById(INPUT_POKEMON_NAME).value,e.openCursor(IDBKeyRange.only(n.toLowerCase())));e.onsuccess=function(e){e=e.target.result;o(e?e.value:null)},e.onerror=function(e){t(new Error("Failed to get Pokemon data."))}})}async function getAllFavPokemon(){return new Promise((o,t)=>{var e=db_openRequest.result.transaction(DB_TABLE_FAV_POKEMONS,"readonly").objectStore(DB_TABLE_FAV_POKEMONS).openCursor();const n=[];e.onsuccess=function(e){e=e.target.result;e?(n.push(e.value),e.continue()):o(n)},e.onerror=function(e){t(new Error("Failed to get all favorite Pokemon data."))}})}async function getOneFavPokemon(n=""){return new Promise((o,t)=>{var e=db_openRequest.result.transaction(DB_TABLE_FAV_POKEMONS,"readonly").objectStore(DB_TABLE_FAV_POKEMONS).index("Name"),e=(n=n||document.getElementById(INPUT_POKEMON_NAME).value,e.openCursor(IDBKeyRange.only(n.toLowerCase())));e.onsuccess=function(e){e=e.target.result;o(e?e.value:null)},e.onerror=function(e){t(new Error("Failed to get favorite Pokemon data."))}})}async function insertFavPokemon(){var e=document.getElementById(INPUT_POKEMON_NAME).value;try{var o,t,n=await getOnePokemon(e);n&&(o=db_openRequest.result.transaction(DB_TABLE_FAV_POKEMONS,"readwrite").objectStore(DB_TABLE_FAV_POKEMONS),t={data:n},o.add(t).onsuccess=function(e){showMessage("Pokemon added successfully!")})}catch(e){console.error(e.message)}}async function updateFavPokemon(){var e=document.getElementById(INPUT_POKEMON_NAME).value;try{var o=await getOneFavPokemon(e);o&&(db_openRequest.result.transaction(DB_TABLE_FAV_POKEMONS,"readwrite").objectStore(DB_TABLE_FAV_POKEMONS).put(o).onsuccess=function(e){showMessage("Pokemon updated successfully!")})}catch(e){console.error(e.message)}}async function deleteFavPokemon(){var e=document.getElementById(INPUT_POKEMON_NAME).value;try{db_openRequest.result.transaction(DB_TABLE_FAV_POKEMONS,"readwrite").objectStore(DB_TABLE_FAV_POKEMONS).delete(e).onsuccess=function(e){showMessage("Pokemon deleted successfully!")}}catch(e){console.error(e.message)}}function insertSubscriber(){var e,o,t=document.getElementById(INPUT_SUBSCRIBER_EMAIL).value;try{t&&(e=db_openRequest.result.transaction(DB_TABLE_SUBSCRIBERS,"readwrite").objectStore(DB_TABLE_SUBSCRIBERS),o={email:t},e.add(o))}catch(e){console.error(e.message)}}function deleteSubscriber(){var e=document.getElementById(INPUT_SUBSCRIBER_EMAIL).value;try{db_openRequest.result.transaction(DB_TABLE_SUBSCRIBERS,"readwrite").objectStore(DB_TABLE_SUBSCRIBERS).delete(e)}catch(e){console.error(e.message)}}function showMessage(e){alert(e)}